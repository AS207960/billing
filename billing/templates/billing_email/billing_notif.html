{% extends "billing_email/email_base.html" %}
{% load mathfilters %}
{% block content %}
    <p>
        Hello {{ name }},
    </p>
    <p>
        Just to let you know your {{ item.type_name }} has been updated.
    </p>
    <table style="width:100%;background:#eee;border-radius:5px;padding:20px;">
        <tbody>
        <tr style="padding:5px;">
            <th>Description</th>
            <td>{{ item.descriptor }}</td>
        </tr>
        <tr style="padding:5px;">
            <th>Amount</th>
            {% if item.amount >= 0 %}
                <td>&pound;{{ item.amount|floatformat:2 }}</td>
            {% else %}
                <td>-&pound;{{ item.amount|abs|floatformat:2 }}</td>
            {% endif %}
        </tr>
        <tr style="padding:5px;">
            <th>State</th>
            <td>
                {% if item.state == "P" %}
                    <span style="background:#ECC94B;padding: 0.25rem 0.4rem;font-size: 75%;border-radius: 10rem;">
                        &#x23f3; Pending
                    </span>
                {% elif item.state == "S" or item.state == "A" %}
                    <span style="background:#319795;padding: 0.25rem 0.4rem;font-size: 75%;border-radius: 10rem;">
                        &#x1f4c7; Processing
                    </span>
                {% elif item.state == "F" %}
                    <span style="background:#E53E3E;padding: 0.25rem 0.4rem;font-size: 75%;border-radius: 10rem;">
                         &#x1f645; Failed
                    </span>
                {% elif item.state == "C" %}
                    <span style="background:#38A169;padding: 0.25rem 0.4rem;font-size: 75%;border-radius: 10rem;">
                         &#x1f4b8; Completed
                    </span>
                {% endif %}
            </td>
        </tr>
        </tbody>
    </table>
    {% if charge_state_error %}
        <p style="width:100%;background:#fad8d8;border-radius:5px;padding:20px;">
            Last error: {{ charge_state_error }}
        </p>
    {% endif %}
    {% if charge_state_url %}
         <a href="{{ charge_state_url }}"
           style="color: #fff;background-color: #3182CE;text-align: center;text-decoration: none;box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);border-radius: .5rem;display: block;padding: 0.5rem 1rem;font-size: 1.25rem;line-height: 1.5;margin-top: 15px;">
            Continue with your order
        </a>
        <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "EmailMessage",
                "potentialAction": {
                    "@type": "ViewAction",
                    "name": "Continue with your order",
                    "url": "{{ charge_state_url }}"
                },
                "description": "Continue with your order on our billing site",
                "publisher": {
                    "@type": "Organization",
                    "name": "AS207960 / Glauca",
                    "url": "https://as207960.net"
                }
            }
        </script>
    {% endif %}
    <p>
        You can always view your account at <a href="https://billing.as207960.net">billing.as207960.net</a>.
    </p>
{% endblock %}
