{% extends 'billing/base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}
    <div class="container my-3">
        <h1>Top-up account</h1>
        <form action="" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="amount">Amount (GBP)</label>
                <input type="number" name="amount" min="2" step="0.01" class="form-control" required="" id="amount">
            </div>
            <hr>
            {% if cards %}
                <h2>Saved cards &#x1f4b3;</h2>
                <div class="table-responsive table-striped table-hover table-striped">
                    <table class="table">
                        <thead class="thead-dark">
                        <tr>
                            <th>Billing name</th>
                            <th>Brand</th>
                            <th>Last 4 digits</th>
                            <th>Expiry</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for card in cards %}
                            <tr>
                                <td>
                                    {{ card.billing_details.name }}
                                </td>
                                <td>{{ card.card.brand|upper }}</td>
                                <td>*** *** **** {{ card.card.last4 }}</td>
                                <td>{{ card.card.exp_month|stringformat:"02d" }} / {{ card.card.exp_year }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary btn-sm" name="card" value="{{ card.id }}">
                                        Select
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
            {% endif %}
            {% if ach_mandates %}
                <h2>ACH Direct Debit Mandates &#x1f4b5;</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                        <tr>
                            <th>Account number</th>
                            <th>Account type</th>
                            <th>Bank</th>
                            <th>Reference</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for mandate in ach_mandates %}
                            <tr>
                                <td>****{{ mandate.last4 }}</td>
                                <td>{% if mandate.account_type == "checking" %}Checking{% elif mandate.account_type == "savings" %}Savings{% endif %}</td>
                                <td>{{ mandate.bank }}</td>
                                <td>{{ mandate.ref }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary btn-sm" name="ach_mandate" value="{{ mandate.id }}">
                                        Pay
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
            {% endif %}
            {% if autogiro_mandates %}
                <h2>Autogiro Mandates &#x1f3e6;</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                        <tr>
                            <th>Account number</th>
                            <th>Bank</th>
                            <th>Reference</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for mandate in autogiro_mandates %}
                            <tr>
                                <td>****{{ mandate.last4 }}</td>
                                <td>{{ mandate.bank }}</td>
                                <td>{{ mandate.ref }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary btn-sm" name="autogiro_mandate" value="{{ mandate.id }}">
                                        Pay
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
            {% endif %}
            {% if bacs_mandates %}
                <h2>BACS Direct Debit Mandates &#x1f3e6;</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                        <tr>
                            <th>Account number</th>
                            <th>Bank</th>
                            <th>Reference</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for mandate in bacs_mandates %}
                            <tr>
                                <td>****{{ mandate.last4 }}</td>
                                <td>{{ mandate.bank }}</td>
                                <td>{{ mandate.ref }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary btn-sm" name="bacs_mandate" value="{{ mandate.id }}">
                                        Pay
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
            {% endif %}
            {% if becs_mandates %}
                <h2>BECS Direct Debit Mandates &#x1f3e6;</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                        <tr>
                            <th>Account number</th>
                            <th>Bank</th>
                            <th>Reference</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for mandate in becs_mandates %}
                            <tr>
                                <td>****{{ mandate.last4 }}</td>
                                <td>{{ mandate.bank }}</td>
                                <td>{{ mandate.ref }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary btn-sm" name="becs_mandate" value="{{ mandate.id }}">
                                        Pay
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
            {% endif %}
            {% if becs_nz_mandates %}
                <h2>BECS NZ Direct Debit Mandates &#x1f3e6;</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                        <tr>
                            <th>Account number</th>
                            <th>Bank</th>
                            <th>Reference</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for mandate in becs_nz_mandates %}
                            <tr>
                                <td>****{{ mandate.last4 }}</td>
                                <td>{{ mandate.bank }}</td>
                                <td>{{ mandate.ref }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary btn-sm" name="becs_nz_mandate" value="{{ mandate.id }}">
                                        Pay
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
            {% endif %}
            {% if betalingsservice_mandates %}
                <h2>Betalingsservice Mandates &#x1f3e6;</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                        <tr>
                            <th>Account number</th>
                            <th>Bank</th>
                            <th>Reference</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for mandate in betalingsservice_mandates %}
                            <tr>
                                <td>****{{ mandate.last4 }}</td>
                                <td>{{ mandate.bank }}</td>
                                <td>{{ mandate.ref }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary btn-sm" name="betalingsservice_mandate" value="{{ mandate.id }}">
                                        Pay
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
            {% endif %}
            {% if pad_mandates %}
                <h2>PAD Direct Debit Mandates &#x1f3e6;</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                        <tr>
                            <th>Account number</th>
                            <th>Bank</th>
                            <th>Reference</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for mandate in pad_mandates %}
                            <tr>
                                <td>****{{ mandate.last4 }}</td>
                                <td>{{ mandate.bank }}</td>
                                <td>{{ mandate.ref }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary btn-sm" name="pad_mandate" value="{{ mandate.id }}">
                                        Pay
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
            {% endif %}
            {% if sepa_mandates %}
                <h2>SEPA Direct Debit Mandates &#x1f3e6;</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                        <tr>
                            <th>Account country</th>
                            <th>Account number</th>
                            <th>Bank</th>
                            <th>Reference</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for mandate in sepa_mandates %}
                            <tr>
                                <td>{{ mandate.cc }}</td>
                                <td>****{{ mandate.last4 }}</td>
                                <td>{{ mandate.bank }}</td>
                                <td>{{ mandate.ref }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary btn-sm" name="sepa_mandate" value="{{ mandate.id }}">
                                        Pay
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
            {% endif %}
            <h2>Pay with a new method</h2>
            <div class="card-columns">
                <div class="card text-center">
                    <div class="card-body d-flex flex-column align-items-center">
                        <h3 class="display-4">&#x1f3e6;</h3>
                        <h5 class="card-title">Bank transfer / Direct Debit</h5>
                        <button type="submit" class="btn btn-primary align-self-stretch" name="method" value="B">
                            Select
                        </button>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body d-flex flex-column align-items-center">
                        <h3 class="display-4">&#x1f4b3;</h3>
                        <h5 class="card-title">Card</h5>
                        <p>
                            <small>Visa, Mastercard, and American Express debit and credit cards supported.</small>
                        </p>
                        <button type="submit" class="btn btn-primary align-self-stretch" name="method" value="C">
                            Select
                        </button>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{% static 'billing/imgs/sofort.svg' %}" alt="SOFORT" class="mb-3 mw-100"
                             style="flex-grow: 1">
                        <button type="submit" class="btn btn-primary align-self-stretch" name="method" value="S">
                            Select
                        </button>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{% static 'billing/imgs/giropay.svg' %}" alt="giropay" class="mb-3 mw-100"
                             style="flex-grow: 1">
                        <button type="submit" class="btn btn-primary align-self-stretch" name="method" value="G">
                            Select
                        </button>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{% static 'billing/imgs/bancontact.svg' %}" alt="Bancontact" class="mb-3 mw-100"
                             style="flex-grow: 1">
                        <button type="submit" class="btn btn-primary align-self-stretch" name="method" value="A">
                            Select
                        </button>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{% static 'billing/imgs/giropay-eps.svg' %}" alt="EPS" class="mb-3 mw-100"
                             style="flex-grow: 1">
                        <button type="submit" class="btn btn-primary align-self-stretch" name="method" value="E">
                            Select
                        </button>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{% static 'billing/imgs/ideal.svg' %}" alt="iDEAL" class="mb-3 mw-100"
                             style="flex-grow: 1">
                        <button type="submit" class="btn btn-primary align-self-stretch" name="method" value="I">
                            Select
                        </button>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{% static 'billing/imgs/multibanco.svg' %}" alt="Multibanco" class="mb-3"
                             style="flex-grow: 1; max-width: 100px">
                        <button type="submit" class="btn btn-primary align-self-stretch" name="method" value="M">
                            Select
                        </button>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{% static 'billing/imgs/przelewy-24.svg' %}" alt="Multibanco" class="mb-3"
                             style="flex-grow: 1; max-width: 100px;">
                        <button type="submit" class="btn btn-primary align-self-stretch" name="method" value="P">
                            Select
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
{% endblock %}